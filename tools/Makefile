OBJ_GETINFO=getinfo.o
GETINFO_EXE=getinfo

OBJ_GETINFOPPC=template_68k.o getinfo_ppc.o
GETINFOPPC_EXE=getinfo_ppc

OBJ_TEMPLATE=template_68k.o template_ppc.o
TEMPLATE_EXE=template

OBJ_INITPPC=InitPPC.o
INITPPC_EXE=InitPPC

BOGOMIPS_EXE=bogomips

ASMPPCPARAM+=-I../sonnetlib

all: $(GETINFO_EXE) $(GETINFOPPC_EXE) $(TEMPLATE_EXE) $(INITPPC_EXE) $(BOGOMIPS_EXE)

$(BOGOMIPS_EXE) : bogomips.c
	$(CC) +warpos -DPOWERPC -c99 -speed -O3 -o $@ $<

$(GETINFOPPC_EXE) : $(OBJ_GETINFOPPC)
	$(LD) -s $(OBJ_GETINFOPPC) -o $(GETINFOPPC_EXE)

$(GETINFO_EXE) : $(OBJ_GETINFO)
	$(LD) -s $(OBJ_GETINFO) -o $(GETINFO_EXE)

$(TEMPLATE_EXE) : $(OBJ_TEMPLATE)
	$(LD) -s $(OBJ_TEMPLATE) -o $(TEMPLATE_EXE)

$(INITPPC_EXE) : $(OBJ_INITPPC)
	$(LD) -s $(OBJ_INITPPC) -o $(INITPPC_EXE)

%.o : %.p $(LOCAL_INCS)
	$(ASMPPC) $(ASMPPCPARAM) -o $@ $< 

%.o : %.s $(LOCAL_INCS)
	$(ASM68K) $(ASM68KPARAM) -o $@ $<

clean :
	$(RM) $(OBJ_GETINFO) $(GETINFO_EXE) $(GETINFO_EXE_RS) 
	$(RM) $(OBJ_GETINFOPPC) $(GETINFOPPC_EXE) $(GETINFOPPC_EXE_RS)
	$(RM) $(OBJ_TEMPLATE) $(TEMPLATE_EXE) $(TEMPLATE_EXE_RS) 
	$(RM) $(OBJ_INITPPC) $(INITPPC_EXE) $(BOGOMIPS_EXE)

